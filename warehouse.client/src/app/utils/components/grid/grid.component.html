<p-table
  stripedRows
  [value]="items"
  [rows]="10"
  [rowsPerPageOptions]="[10, 25, 50]"
  [loading]="loading"
  [paginator]="true"
  [lazy]="true"
  [lazyLoadOnInit]="true"
  (onLazyLoad)="lazyLoad($event)"
  >
  <ng-template #header>
    <tr>
      @for (columnData of columns; track columnData.field) {
        <th>{{ columnData.title }}</th>
      }
    </tr>
    <tr>
      @for (columnData of columns; track columnData.field) {
        @switch(columnData.filtering) {
          @case(FilteringType.MULTISELECT) {
            <th>
              <p-columnFilter [field]="columnData.field" matchMode="in" [showMenu]="false">
                <ng-template #filter let-value let-filter="filterCallback">
                  <p-multiselect
                    [ngModel]="value"
                    [options]="columnData.multiselectOptions"
                    placeholder="Все"
                    (onChange)="filter($event.value)"
                    optionLabel="title"
                    optionValue="value"
                    style="min-width: 14rem"
                    [panelStyle]="{ minWidth: '16rem' }">
                    <ng-template let-option #item>
                      <div class="flex items-center gap-2">
                        <span>{{ option.title }}</span>
                      </div>
                    </ng-template>
                  </p-multiselect>
                </ng-template>
              </p-columnFilter>
            </th>
          }
          @default {
            <th></th>
          }
        }
      }
    </tr>
  </ng-template>
  <ng-template #body let-item>
    <tr style="height: 4rem;">
      @for (columnData of columns; track columnData.field) {
        <td>{{ item[columnData.field] }}</td>
      }
    </tr>
  </ng-template>
</p-table>
